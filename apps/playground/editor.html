<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rendx Graph Editor</title>
    <link rel="stylesheet" href="/src/editor/editor.css" />
  </head>
  <body>
    <div id="app">
      <!-- 顶部工具栏 -->
      <header id="toolbar">
        <div class="toolbar-left">
          <span class="logo">Rendx</span>
          <span class="badge">Graph Editor</span>
        </div>
        <div class="toolbar-center">
          <button id="btn-undo" title="撤销 (⌘Z)" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 10h10a5 5 0 0 1 0 10H9"/><path d="M3 10l4-4"/><path d="M3 10l4 4"/></svg>
          </button>
          <button id="btn-redo" title="重做 (⌘⇧Z)" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10H11a5 5 0 0 0 0 10h4"/><path d="M21 10l-4-4"/><path d="M21 10l-4 4"/></svg>
          </button>
          <div class="separator"></div>
          <button id="btn-zoom-in" title="放大">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/><path d="M11 8v6"/><path d="M8 11h6"/></svg>
          </button>
          <span id="zoom-level">100%</span>
          <button id="btn-zoom-out" title="缩小">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/><path d="M8 11h6"/></svg>
          </button>
          <button id="btn-fit" title="适应画布">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6"/><path d="M9 21H3v-6"/><path d="M21 3l-7 7"/><path d="M3 21l7-7"/></svg>
          </button>
          <div class="separator"></div>
          <button id="btn-delete" title="删除选中 (Delete/Backspace)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
          </button>
          <button id="btn-clear" title="清空画布">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
          </button>
        </div>
        <div class="toolbar-right">
          <a href="./" class="link-playground" title="返回 Playground">Playground →</a>
        </div>
      </header>

      <!-- 主体 -->
      <div id="main">
        <!-- 左侧节点面板 -->
        <aside id="node-panel">
          <h3>节点</h3>
          <div class="node-list">
            <div class="node-item" data-type="start" draggable="true">
              <div class="node-preview start">
                <svg width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="#52c41a" stroke="#389e0d" stroke-width="1.5"/><polygon points="13,10 13,22 23,16" fill="white"/></svg>
              </div>
              <span>开始</span>
            </div>
            <div class="node-item" data-type="end" draggable="true">
              <div class="node-preview end">
                <svg width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="#ff4d4f" stroke="#cf1322" stroke-width="1.5"/><rect x="10" y="10" width="12" height="12" rx="2" fill="white"/></svg>
              </div>
              <span>结束</span>
            </div>
            <div class="node-item" data-type="process" draggable="true">
              <div class="node-preview process">
                <svg width="32" height="32" viewBox="0 0 32 32"><rect x="2" y="6" width="28" height="20" rx="4" fill="#1890ff" stroke="#096dd9" stroke-width="1.5"/><path d="M10 16h12M16 12v8" stroke="white" stroke-width="1.5"/></svg>
              </div>
              <span>处理</span>
            </div>
            <div class="node-item" data-type="condition" draggable="true">
              <div class="node-preview condition">
                <svg width="32" height="32" viewBox="0 0 32 32"><polygon points="16,2 30,16 16,30 2,16" fill="#faad14" stroke="#d48806" stroke-width="1.5"/><text x="16" y="20" text-anchor="middle" fill="white" font-size="14" font-weight="bold">?</text></svg>
              </div>
              <span>条件</span>
            </div>
            <div class="node-item" data-type="data" draggable="true">
              <div class="node-preview data">
                <svg width="32" height="32" viewBox="0 0 32 32"><path d="M6 6h24l-4 20H2z" fill="#722ed1" stroke="#531dab" stroke-width="1.5"/><path d="M10 16h12" stroke="white" stroke-width="1.5"/></svg>
              </div>
              <span>数据</span>
            </div>
            <div class="node-item" data-type="custom" draggable="true">
              <div class="node-preview custom">
                <svg width="32" height="32" viewBox="0 0 32 32"><rect x="2" y="6" width="28" height="20" rx="4" fill="#13c2c2" stroke="#08979c" stroke-width="1.5"/><circle cx="16" cy="16" r="5" fill="white"/></svg>
              </div>
              <span>自定义</span>
            </div>
          </div>
          <h3 style="margin-top: 16px">信息</h3>
          <div id="info-panel">
            <p class="hint">选中节点查看属性</p>
          </div>
        </aside>

        <!-- 画布区域 -->
        <div id="canvas-area">
          <div id="canvas-container"></div>
        </div>
      </div>

      <!-- 状态栏 -->
      <footer id="statusbar">
        <span id="status-nodes">节点: 0</span>
        <span id="status-edges">边: 0</span>
        <span id="status-selection">未选中</span>
        <span id="status-hint">拖拽左侧节点到画布创建 · 拖拽端口连线 · 滚轮缩放 · 空格+拖拽平移</span>
      </footer>
    </div>

    <script type="module" src="/src/editor/main.ts"></script>
  </body>
</html>
